<?xml version="1.0" encoding="UTF-8"?>
<!--
 * See the NOTICE file distributed with this work for additional
 * information regarding copyright ownership.
 *
 * This is free software; you can redistribute it and/or modify it
 * under the terms of the GNU Lesser General Public License as
 * published by the Free Software Foundation; either version 2.1 of
 * the License, or (at your option) any later version.
 *
 * This software is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
 * Lesser General Public License for more details.
 *
 * You should have received a copy of the GNU Lesser General Public
 * License along with this software; if not, write to the Free
 * Software Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA
 * 02110-1301 USA, or see the FSF site: http://www.fsf.org.
-->

<xwikidoc version="1.1">
  <web>EESCCode</web>
  <name>EESCSkin</name>
  <language/>
  <defaultLanguage/>
  <translation>0</translation>
  <creator>xwiki:XWiki.Admin</creator>
  <creationDate>1421919832000</creationDate>
  <author>xwiki:XWiki.Admin</author>
  <contentAuthor>xwiki:XWiki.Admin</contentAuthor>
  <date>1422285284000</date>
  <contentUpdateDate>1422281732000</contentUpdateDate>
  <version>1.1</version>
  <title>EESC Skin</title>
  <comment/>
  <minorEdit>false</minorEdit>
  <syntaxId>xwiki/2.1</syntaxId>
  <hidden>false</hidden>
  <content/>
  <attachment>
    <filename>uicomponents.widgets.userpicker.userPicker.js</filename>
    <author>XWiki.Admin</author>
    <date>1422281732000</date>
    <version>1.1</version>
    <comment/>
    <content>dmFyIFhXaWtpPShmdW5jdGlvbiBkZWZpbmVVc2VyUGlja2VyKGUpe3ZhciBiPWUud2lkZ2V0cztpZighYnx8IWIuU3VnZ2VzdFBpY2tlcil7dmFyIGM9YXJndW1lbnRzWzFdfHwwO2lmKGM+NSl7Y29uc29sZS5lcnJvcigiRmFpbGVkIHRvIGRlZmluZSB0aGUgVXNlclBpY2tlciBtb2R1bGU6IHJlcXVpcmVkIGRlcGVuZGVuY3kgU3VnZ2VzdFBpY2tlciBpcyBtaXNzaW5nLiIpfWVsc2V7c2V0VGltZW91dChkZWZpbmVVc2VyUGlja2VyLmJpbmQod2luZG93LGUsYysxKSwwKX1yZXR1cm4gZX12YXIgYT1DbGFzcy5jcmVhdGUoYi5TdWdnZXN0UGlja2VyLHttYXRjaGVzU2VsZWN0ZWRWYWx1ZTpmdW5jdGlvbihnLGYpe3JldHVybiBlLk1vZGVsLnJlc29sdmUoZyxlLkVudGl0eVR5cGUuRE9DVU1FTlQpLm5hbWU9PWYuaWR9LGdldERlZmF1bHRTdWdnZXN0aW9uOmZ1bmN0aW9uKGcpe3ZhciBmPWUuTW9kZWwucmVzb2x2ZShnLGUuRW50aXR5VHlwZS5ET0NVTUVOVCk7cmV0dXJue2lkOmYubmFtZSx2YWx1ZTpnLGluZm86Zi5uYW1lLGljb246Ii9wcmovcmVzb3VyY2VzL2ljb25zL3h3aWtpL25vYXZhdGFyLnBuZyJ9fSxhZGRJdGVtOmZ1bmN0aW9uKCRzdXBlcixmKXt0aGlzLmlucHV0Lmhhc0NsYXNzTmFtZSgibXVsdGlwbGVTZWxlY3Rpb24iKXx8dGhpcy5saXN0LnVwZGF0ZSgiIik7JHN1cGVyKGYpfSxkaXNwbGF5SXRlbTpmdW5jdGlvbihmKXt2YXIgZz10aGlzLnN1Z2dlc3QuY3JlYXRlSXRlbURpc3BsYXkoZix7fSk7Zy5kb3duKCIudXNlci1uYW1lIikuaW5zZXJ0KHRoaXMuY3JlYXRlRGVsZXRlVG9vbCgpKTtyZXR1cm4gbmV3IEVsZW1lbnQoImxpIikuaW5zZXJ0KGcpLmluc2VydCh0aGlzLmNyZWF0ZUl0ZW1JbnB1dChmKSl9fSk7Yi5Vc2VyUGlja2VyPUNsYXNzLmNyZWF0ZShiLlN1Z2dlc3Qse2luaXRpYWxpemU6ZnVuY3Rpb24oJHN1cGVyLGYsZyl7JHN1cGVyKGYsT2JqZWN0LmV4dGVuZCh7dmFybmFtZToiaW5wdXQiLGVuYWJsZUhpZGVCdXR0b246ZmFsc2UsdGltZW91dDozMDAwMH0sZ3x8e30pKTt2YXIgaD1mO2lmKGYuaGFzQ2xhc3NOYW1lKCJ3aXRoU2NvcGUiKSYmIWYuaGFzQ2xhc3NOYW1lKCJnbG9iYWwiKSl7dGhpcy5fc291cmNlVVJMPWcuc2NyaXB0O3RoaXMuX2NyZWF0ZVNjb3BlKCk7aD1mLnVwKCl9dGhpcy5fc2VsZWN0aW9uTWFuYWdlcj10aGlzLl9jcmVhdGVTZWxlY3Rpb25NYW5hZ2VyKHtsaXN0SW5zZXJ0aW9uRWxlbWVudDpoLGxpc3RJbnNlcnRpb25Qb3NpdGlvbjoiYmVmb3JlIixhY2NlcHRGcmVlVGV4dDp0cnVlfSk7dGhpcy5tdWx0aXBsZVNlbGVjdGlvbj1mLmhhc0NsYXNzTmFtZSgibXVsdGlwbGVTZWxlY3Rpb24iKTtpZihmLmlkIT0iIil7Yi5Vc2VyUGlja2VyLmluc3RhbmNlc1tmLmlkXT10aGlzfX0sY3JlYXRlSXRlbURpc3BsYXk6ZnVuY3Rpb24oayxqKXt2YXIgZj1uZXcgRWxlbWVudCgiZGl2Iix7ImNsYXNzIjoidXNlciJ9KTt2YXIgZz1uZXcgRWxlbWVudCgiZGl2Iix7ImNsYXNzIjoidXNlci1hdmF0YXItd3JhcHBlciJ9KTtnLmluc2VydChuZXcgRWxlbWVudCgiaW1nIix7c3JjOmsuaWNvbixhbHQ6ay5pbmZvLCJjbGFzcyI6Imljb24ifSkpO2YuaW5zZXJ0KGcpO3ZhciBpPWouaGlnaGxpZ2h0P3RoaXMuZW1waGFzaXplTWF0Y2hlcyh0aGlzLnNJbnB1dCxrLmluZm8pOmsuaW5mbztmLmluc2VydChuZXcgRWxlbWVudCgiZGl2Iix7ImNsYXNzIjoidXNlci1uYW1lIn0pLnVwZGF0ZShpKSk7dmFyIGg9ai5oaWdobGlnaHQ/dGhpcy5lbXBoYXNpemVNYXRjaGVzKHRoaXMuc0lucHV0LGsuaWQpOmsuaWQ7Zi5pbnNlcnQobmV3IEVsZW1lbnQoImRpdiIseyJjbGFzcyI6InVzZXItYWxpYXMifSkudXBkYXRlKGgpKTtyZXR1cm4gZn0sY2xlYXI6ZnVuY3Rpb24oKXt0aGlzLmZsZC5jbGVhcigpO3RoaXMuX3NlbGVjdGlvbk1hbmFnZXIuY2xlYXJBY2NlcHRlZExpc3QoKX0sX2NyZWF0ZVNlbGVjdGlvbk1hbmFnZXI6ZnVuY3Rpb24oZil7cmV0dXJuIG5ldyBhKHRoaXMuZmxkLHRoaXMsZil9LF9jcmVhdGVTY29wZTpmdW5jdGlvbigpe3RoaXMuX3Njb3BlPW5ldyBFbGVtZW50KCJpbnB1dCIse3R5cGU6ImltYWdlIiwiY2xhc3MiOiJzY29wZSIsYWx0OiJDbGlxdWVyIHBvdXIgYmFzY3VsZXIgZW50cmUgbGEgcG9ydMOpZSBsb2NhbGUgZXQgY2VsbGUgZ2xvYmFsZSIsdGl0bGU6IkNsaXF1ZXIgcG91ciBiYXNjdWxlciBlbnRyZSBsYSBwb3J0w6llIGxvY2FsZSBldCBjZWxsZSBnbG9iYWxlIn0pO3ZhciBmPW5ldyBFbGVtZW50KCJzcGFuIikuaW5zZXJ0KHRoaXMuX3Njb3BlKTt0aGlzLmZsZC5pbnNlcnQoe2JlZm9yZTpmfSk7Zi5pbnNlcnQodGhpcy5mbGQpO3RoaXMuX3Njb3BlLm9ic2VydmUoImNsaWNrIix0aGlzLl90b2dnbGVTY29wZS5iaW5kQXNFdmVudExpc3RlbmVyKHRoaXMpKTt0aGlzLl90b2dnbGVTY29wZSgpfSxfdG9nZ2xlU2NvcGU6ZnVuY3Rpb24oZil7ZiYmZi5zdG9wKCk7aWYodGhpcy5fc2NvcGUudmFsdWU9PSJsb2NhbCIpe3RoaXMuX3Njb3BlLnZhbHVlPSJnbG9iYWwiO3RoaXMuX3Njb3BlLnNyYz0iL3Byai9yZXNvdXJjZXMvaWNvbnMvc2lsay93b3JsZC5wbmcifWVsc2V7dGhpcy5fc2NvcGUudmFsdWU9ImxvY2FsIjt0aGlzLl9zY29wZS5zcmM9Ii9wcmovcmVzb3VyY2VzL2ljb25zL3NpbGsvd29ybGRfZGVsZXRlLnBuZyJ9dGhpcy5zb3VyY2VzWzBdLnNjcmlwdD10aGlzLl9zb3VyY2VVUkwrIndpa2k9Iit0aGlzLl9zY29wZS52YWx1ZSsiJiJ9LGRldGFjaDpmdW5jdGlvbigkc3VwZXIpe3RoaXMuX3NlbGVjdGlvbk1hbmFnZXImJnRoaXMuX3NlbGVjdGlvbk1hbmFnZXIuZGV0YWNoKCk7dGhpcy5fc2NvcGUmJnRoaXMuX3Njb3BlLnN0b3BPYnNlcnZpbmcoImNsaWNrIikudXAoKS5pbnNlcnQoe2JlZm9yZTp0aGlzLmZsZH0pLnJlbW92ZSgpOyRzdXBlcigpfX0pO2IuVXNlclBpY2tlci5pbnN0YW5jZXM9e307dmFyIGQ9ZnVuY3Rpb24oZil7dmFyIGg9e3VzZXJzOntzY3JpcHQ6ZS5jdXJyZW50RG9jdW1lbnQuZ2V0VVJMKCJnZXQiLCJ4cGFnZT11b3Jnc3VnZ2VzdCZ1b3JnPXVzZXIiICsgKCgkKCdUYXNrTWFuYWdlci5UYXNrTWFuYWdlckNsYXNzXzBfcHJvamVjdCcpKT8iJnByb2plY3Q9IiArICQoJ1Rhc2tNYW5hZ2VyLlRhc2tNYW5hZ2VyQ2xhc3NfMF9wcm9qZWN0JykudmFsdWU6IiIpICsgIiYiKSxub3Jlc3VsdHM6IlV0aWxpc2F0ZXVyIG5vbiB0cm91dsOpIn0sZ3JvdXBzOntzY3JpcHQ6ZS5jdXJyZW50RG9jdW1lbnQuZ2V0VVJMKCJnZXQiLCJ4cGFnZT11b3Jnc3VnZ2VzdCZ1b3JnPWdyb3VwJiIpLG5vcmVzdWx0czoiR3JvdXBlIGludHJvdXZhYmxlIn19O3ZhciBnPShmJiZmLm1lbW8uZWxlbWVudHMpfHxbJCgiYm9keSIpXTtPYmplY3Qua2V5cyhoKS5lYWNoKGZ1bmN0aW9uKGkpe2cuZWFjaChmdW5jdGlvbihqKXtqLnNlbGVjdCgiaW5wdXQuc3VnZ2VzdCIraS5jYXBpdGFsaXplKCkpLmVhY2goZnVuY3Rpb24oayl7aWYoIWsuaGFzQ2xhc3NOYW1lKCJpbml0aWFsaXplZCIpKXt2YXIgbD1PYmplY3QuY2xvbmUoaFtpXSk7aWYoay5oYXNDbGFzc05hbWUoImdsb2JhbCIpKXtsLnNjcmlwdD1sLnNjcmlwdCsid2lraT1nbG9iYWwmIn1uZXcgYi5Vc2VyUGlja2VyKGssbCk7ay5hZGRDbGFzc05hbWUoImluaXRpYWxpemVkIil9fSl9KX0pO3JldHVybiB0cnVlfTsoZS5kb21Jc0xvYWRlZCYmZCgpKXx8ZG9jdW1lbnQub2JzZXJ2ZSgieHdpa2k6ZG9tOmxvYWRlZCIsZCk7ZG9jdW1lbnQub2JzZXJ2ZSgieHdpa2k6ZG9tOnVwZGF0ZWQiLGQpO3JldHVybiBlfSkoWFdpa2l8fHt9KTs=</content>
    <filesize>3773</filesize>
  </attachment>
  <object>
    <name>EESCCode.EESCSkin</name>
    <number>0</number>
    <className>XWiki.XWikiSkins</className>
    <guid>c864391c-532a-4f45-bba6-475855ed53c1</guid>
    <class>
      <name>XWiki.XWikiSkins</name>
      <customClass/>
      <customMapping/>
      <defaultViewSheet/>
      <defaultEditSheet/>
      <defaultWeb/>
      <nameField/>
      <validationScript/>
      <baseskin>
        <customDisplay/>
        <disabled>0</disabled>
        <name>baseskin</name>
        <number>2</number>
        <picker>0</picker>
        <prettyName>Base Skin</prettyName>
        <size>30</size>
        <unmodifiable>0</unmodifiable>
        <validationMessage/>
        <validationRegExp/>
        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
      </baseskin>
      <contentview.vm>
        <customDisplay/>
        <disabled>0</disabled>
        <editor>PureText</editor>
        <name>contentview.vm</name>
        <number>17</number>
        <picker>0</picker>
        <prettyName>contentview.vm</prettyName>
        <rows>15</rows>
        <size>80</size>
        <unmodifiable>0</unmodifiable>
        <validationMessage/>
        <validationRegExp/>
        <classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>
      </contentview.vm>
      <docdoesnotexist.vm>
        <customDisplay/>
        <disabled>0</disabled>
        <editor>PureText</editor>
        <name>docdoesnotexist.vm</name>
        <number>13</number>
        <picker>0</picker>
        <prettyName>docdoesnotexist.vm</prettyName>
        <rows>15</rows>
        <size>80</size>
        <unmodifiable>0</unmodifiable>
        <validationMessage/>
        <validationRegExp/>
        <classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>
      </docdoesnotexist.vm>
      <edit.vm>
        <customDisplay/>
        <disabled>0</disabled>
        <editor>PureText</editor>
        <name>edit.vm</name>
        <number>9</number>
        <picker>0</picker>
        <prettyName>Edit</prettyName>
        <rows>15</rows>
        <size>80</size>
        <unmodifiable>0</unmodifiable>
        <validationMessage/>
        <validationRegExp/>
        <classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>
      </edit.vm>
      <editinline.vm>
        <customDisplay/>
        <disabled>0</disabled>
        <editor>PureText</editor>
        <name>editinline.vm</name>
        <number>10</number>
        <picker>0</picker>
        <prettyName>editinline.vm</prettyName>
        <rows>15</rows>
        <size>80</size>
        <unmodifiable>0</unmodifiable>
        <validationMessage/>
        <validationRegExp/>
        <classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>
      </editinline.vm>
      <eescHeader.vm>
        <customDisplay/>
        <disabled>0</disabled>
        <editor>PureText</editor>
        <name>eescHeader.vm</name>
        <number>14</number>
        <picker>0</picker>
        <prettyName>eescHeader.vm</prettyName>
        <rows>15</rows>
        <size>80</size>
        <unmodifiable>0</unmodifiable>
        <validationMessage/>
        <validationRegExp/>
        <classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>
      </eescHeader.vm>
      <eescTitle.vm>
        <customDisplay/>
        <disabled>0</disabled>
        <editor>PureText</editor>
        <name>eescTitle.vm</name>
        <number>15</number>
        <picker>0</picker>
        <prettyName>eescTitle.vm</prettyName>
        <rows>15</rows>
        <size>80</size>
        <unmodifiable>0</unmodifiable>
        <validationMessage/>
        <validationRegExp/>
        <classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>
      </eescTitle.vm>
      <footer.vm>
        <customDisplay/>
        <disabled>0</disabled>
        <editor>PureText</editor>
        <name>footer.vm</name>
        <number>6</number>
        <picker>0</picker>
        <prettyName>Footer</prettyName>
        <rows>15</rows>
        <size>80</size>
        <unmodifiable>0</unmodifiable>
        <validationMessage/>
        <validationRegExp/>
        <classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>
      </footer.vm>
      <header.vm>
        <customDisplay/>
        <disabled>0</disabled>
        <editor>PureText</editor>
        <name>header.vm</name>
        <number>5</number>
        <picker>0</picker>
        <prettyName>Header</prettyName>
        <rows>15</rows>
        <size>80</size>
        <unmodifiable>0</unmodifiable>
        <validationMessage/>
        <validationRegExp/>
        <classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>
      </header.vm>
      <layoutExtraVars.vm>
        <customDisplay/>
        <disabled>0</disabled>
        <editor>PureText</editor>
        <name>layoutExtraVars.vm</name>
        <number>11</number>
        <picker>0</picker>
        <prettyName>layoutExtraVars.vm</prettyName>
        <rows>15</rows>
        <size>80</size>
        <unmodifiable>0</unmodifiable>
        <validationMessage/>
        <validationRegExp/>
        <classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>
      </layoutExtraVars.vm>
      <logo>
        <customDisplay/>
        <disabled>0</disabled>
        <name>logo</name>
        <number>3</number>
        <picker>0</picker>
        <prettyName>Logo</prettyName>
        <size>30</size>
        <unmodifiable>0</unmodifiable>
        <validationMessage/>
        <validationRegExp/>
        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
      </logo>
      <name>
        <customDisplay/>
        <disabled>0</disabled>
        <name>name</name>
        <number>1</number>
        <picker>0</picker>
        <prettyName>Name</prettyName>
        <size>30</size>
        <unmodifiable>0</unmodifiable>
        <validationMessage/>
        <validationRegExp/>
        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
      </name>
      <preview.vm>
        <customDisplay/>
        <disabled>0</disabled>
        <editor>PureText</editor>
        <name>preview.vm</name>
        <number>12</number>
        <picker>0</picker>
        <prettyName>preview.vm</prettyName>
        <rows>15</rows>
        <size>80</size>
        <unmodifiable>0</unmodifiable>
        <validationMessage/>
        <validationRegExp/>
        <classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>
      </preview.vm>
      <style.css>
        <customDisplay/>
        <disabled>0</disabled>
        <editor>PureText</editor>
        <name>style.css</name>
        <number>4</number>
        <picker>0</picker>
        <prettyName>Style</prettyName>
        <rows>15</rows>
        <size>80</size>
        <unmodifiable>0</unmodifiable>
        <validationMessage/>
        <validationRegExp/>
        <classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>
      </style.css>
      <uorgsuggest.vm>
        <customDisplay/>
        <disabled>0</disabled>
        <editor>PureText</editor>
        <name>uorgsuggest.vm</name>
        <number>16</number>
        <picker>0</picker>
        <prettyName>uorgsuggest.vm</prettyName>
        <rows>15</rows>
        <size>80</size>
        <unmodifiable>0</unmodifiable>
        <validationMessage/>
        <validationRegExp/>
        <classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>
      </uorgsuggest.vm>
      <view.vm>
        <customDisplay/>
        <disabled>0</disabled>
        <editor>PureText</editor>
        <name>view.vm</name>
        <number>8</number>
        <picker>0</picker>
        <prettyName>View</prettyName>
        <rows>15</rows>
        <size>80</size>
        <unmodifiable>0</unmodifiable>
        <validationMessage/>
        <validationRegExp/>
        <classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>
      </view.vm>
      <viewheader.vm>
        <customDisplay/>
        <disabled>0</disabled>
        <editor>PureText</editor>
        <name>viewheader.vm</name>
        <number>7</number>
        <picker>0</picker>
        <prettyName>View Header</prettyName>
        <rows>15</rows>
        <size>80</size>
        <unmodifiable>0</unmodifiable>
        <validationMessage/>
        <validationRegExp/>
        <classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>
      </viewheader.vm>
    </class>
    <property>
      <baseskin>flamingo</baseskin>
    </property>
    <property>
      <contentview.vm>###
### Display document contents in "view" mode.
###
## -------------------------------
## Compute the content to display 
## -------------------------------
## Honor the syntax if it's passed in the request.
#set($outputSyntax = $xwiki.getAvailableRendererSyntax($request.outputSyntax, $request.outputSyntaxVersion))
#if ($outputSyntax)
  ## If the passed syntax is not an HTML-compatible syntax we need to HTML-escape it so that it can be 
  ## displayed fine in HTML (since at the point this vm file is called we're already inside an HTML page with
  ## panels on the side, header, etc).
  #set($syntaxType = $outputSyntax.type.toIdString())
  #if (($syntaxType == "xhtml") || ($syntaxType == "html"))
    #set ($renderedContent = $tdoc.getRenderedContent($outputSyntax))
  #else
    ## Make sure to print correctly the result when it's not HTML
    #set ($renderedContent = "&lt;pre&gt;$escapetool.html($tdoc.getRenderedContent($outputSyntax))&lt;/pre&gt;")
  #end
#else
  #set ($renderedContent = $tdoc.getRenderedContent())
#end
## ----------------------------------------------------------------------------
## Compute title to display and modify rendered content accordingly.
## ----------------------------------------------------------------------------
#template("titlevars.vm")
## ----------------------------
## Display the title
## ----------------------------
&lt;div class="xcontent"&gt;
  &lt;div class="row document-header"&gt;
    &lt;div class="document-info col-xs-12 #if($displayContentMenu)col-md-7#end"&gt;
      #if($doc.getObject("ProjectsCode.ProjectsCodeClass") &amp;&amp; !$doc.fullName.equals('ProjectsCode.ProjectsCodeTemplate'))
		#set($titleToDisplay = "[${services.localization.render('ProjectsCode.app.title')}] " + $titleToDisplay)
	  #end
	  &lt;div id="document-title"&gt;&lt;h1&gt;$titleToDisplay&lt;/h1&gt;&lt;/div&gt;
      &lt;div class="xdocLastModification"&gt;
        $services.localization.render('core.footer.modification', [$xwiki.getUserName($tdoc.author), $xwiki.formatDate($tdoc.date)])
      &lt;/div&gt;
    &lt;/div&gt;
    #if($displayContentMenu)
      &lt;div class="document-menu col-xs-12 col-md-5"&gt;
        #template("menus_content.vm")
      &lt;/div&gt;
    #end
  &lt;/div&gt;
  &lt;hr/&gt;
  ## --------------------------------------------------------------------------
  ## Drop permissions as they are no longer needed. This allows us not to have
  ## to review the code below for security holes since nothing bad can happen.
  ## --------------------------------------------------------------------------
  $xcontext.dropPermissions()
  ## ----------------------------
  ## Display the rendered content
  ## ----------------------------
  &lt;div class="row"&gt;
    &lt;div id="xwikicontent" class="col-xs-12"&gt;
      $renderedContent
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;
## -----------------------------------------------------------------------------------
## Display the footnotes if the document is in 1.0 syntax and if there are any defined
## -----------------------------------------------------------------------------------
#set($footnotes = "#putFootnotes()")
$xwiki.renderText($footnotes, $doc)
</contentview.vm>
    </property>
    <property>
      <docdoesnotexist.vm>###
### Document does not exist message
###
###
#if ($services.distribution.jobStatus &amp;&amp; $services.distribution.jobStatus.state.name() != 'FINISHED' &amp;&amp; $services.distribution.canDisplayDistributionWizard())
  $response.sendRedirect($xwiki.getURL('XWiki.Distribution', 'distribution', "xredirect=$escapetool.url($xwiki.relativeRequestURL)"))
#else
  #set($documentredirectref = $services.model.createDocumentReference($xcontext.mainWikiName, 'Main', 'WebHome'))
  $response.sendRedirect($xwiki.getURL($documentredirectref))
#end
</docdoesnotexist.vm>
    </property>
    <property>
      <edit.vm>###
### Main "edit" template
###
### General wrapper for edit actions
###
##
## Is the document being edited by another user?
## If yes, warn about it and show a forcing link:
##
#if($tdoc.getLocked() &amp;&amp; "$!request.get('force')" == '')
  #template("startpage.vm")
  &lt;div class="main"&gt;
   &lt;div id="mainContentArea"&gt;
    ##
    $response.setStatus(423)
    #set($newquerystring = "$!{request.getQueryString().replaceAll('&amp;', '&amp;amp;').replaceAll('&amp;amp;amp;', '&amp;amp;')}"
                         + '&amp;amp;force=1')
    #set($forceEditURL = $doc.getURL($xcontext.getAction(), ${newquerystring}))
    #xwikimessageboxstart($services.localization.render('notice') "$services.localization.render('doclockedby') $xwiki.getUserName($doc.getLockingUser())")
    &lt;a href="$forceEditURL"&gt;$services.localization.render('forcelock')&lt;/a&gt;
    #xwikimessageboxend()
    ##
   &lt;/div&gt;## mainContentArea
  &lt;/div&gt;## main
  #template("endpage.vm")
#else
  ##
  ## Determine what editor to show
  ##
  #if("$!editor" == '')
    ## Normally no special characters should exist in the editor parameter, so this is just a protection measure.
    #set($editor = "$!{escapetool.xml($request.getParameter('editor'))}")
    #if($editor == '')
      ## Determine the sheets using the default document translation because objects are accessible only from the default translation.
      #if(!$services.sheet.getSheets($doc, $xcontext.action).isEmpty())
        #set($editor = 'inline')
      #elseif (($xwiki.getUserPreference('editor') == 'Wysiwyg') &amp;&amp; ($tdoc.syntax.toIdString() == 'xwiki/1.0' &amp;&amp; !$tdoc.isAdvancedContent() || $services.wysiwyg.isSyntaxSupported($tdoc.syntax.toIdString())))
        #set($editor = 'wysiwyg')
      #else
        #set($editor = 'wiki')
      #end
    #end
  #end
  #if($editor == 'inline')
    ## The inline editor uses the view layout, unlike the rest of the editors.
    #template('startpage.vm')
    #template('editinline.vm')
    #template('endpage.vm')
  #else
  ##
  ## "Compute" the title
  ##
  #set ($title = $services.localization.render("platform.web.editors.${editor}.pageTitle", [$tdoc.plainTitle]))
  #if ($title == "platform.web.editors.${editor}.pageTitle")
    #set ($title = $services.localization.render('platform.web.editors.unknown.pageTitle', [$tdoc.plainTitle]))
  #end
  ##
  ## Header
  ##
  #template("xwikivars.vm")
  #template("layoutvars.vm")
  #template("htmlheader.vm")
  #if($displayMainMenu)
    &lt;div id="menuview"&gt;
      #template("menus_view.vm")
    &lt;/div&gt;
  #end
  #template("header.vm")
  #if($editor == 'wiki' || $editor == 'wysiwyg')
    &lt;form id="edit" method="post" action="$doc.getURL('preview')" class="withLock form"&gt;
    &lt;div class="hidden"&gt;
    ## CSRF prevention
    &lt;input type="hidden" name="form_token" value="$!{services.csrf.getToken()}" /&gt;
    ## Pass the section number when the form is submitted in order to affect only the specified section.
    ## We need to test if the section number is present to prevent a NumberFormatException for the empty string.
    #if("$!{request.section}" != '')
      &lt;input type="hidden" name="section" value="$!{escapetool.xml($request.section)}" /&gt;
    #end
    ## This input is used by the full screen widget: it stores the selector of the maximized element, so that the full screen can be restored when coming back from preview.
    &lt;input type="hidden" name="x-maximized" value="$!{escapetool.xml($request.get('x-maximized'))}"/&gt;
    &lt;/div&gt;
  #end
  ##################
  ##   Edit zone  ##
  ##################
  &lt;div id="xwikieditor"&gt;
  &lt;div id="xwikieditorinner"&gt;
  &lt;div class="leftsidecolumns main"&gt;
  &lt;div id="editcolumn" class="editor editor-${editor}"&gt;
  &lt;div class="alleditcontent"&gt;
  &lt;div id="mainEditArea"&gt;
  #if($editor == 'wiki' || $editor == 'wysiwyg' || $editor == 'inline')
    &lt;div class='edit-meta-tools'&gt;
      &lt;a id='editParentTrigger' class='tool edit-parent' href='#mainEditArea' title="$services.localization.render('core.editors.content.parentField.edit.title')"&gt;[$services.localization.render('core.editors.content.parentField.edit')]&lt;/a&gt;
    &lt;/div&gt;
  #end
  #template("eescTitle.vm")
  #template("hierarchy.vm")
  &lt;div class="row"&gt;
    #if (($editor == 'wiki' || $editor == 'wysiwyg') &amp;&amp; !$request.section)
      &lt;div id="editMeta" class="col-xs-12 col-md-7"&gt;
        #template('editmeta.vm')
      &lt;/div&gt;
    #else
      &lt;div id="document-title" class="col-xs-12 col-md-7"&gt;&lt;h1&gt;
      #if($editor == 'rights')
        $services.localization.render('core.editors.rights.title', [$escapetool.xml($doc.plainTitle), $doc.getURL()])
      #elseif($editor == 'object')
        $services.localization.render('core.editors.object.title', [$escapetool.xml($doc.plainTitle), $doc.getURL()])
      #elseif($editor == 'class')
        $services.localization.render('core.editors.class.title', [$escapetool.xml($doc.fullName), $doc.getURL()])
      #end
      &lt;/h1&gt;&lt;/div&gt;
    #end
    #if($displayContentMenu)
      &lt;div class="col-xs-12 col-md-5"&gt;
        #template("menus_content.vm")
      &lt;/div&gt;
    #end
  &lt;/div&gt; ## row
  #template("edit${editor}.vm")
  ## This javascript must be placed here since it uses velocity variables set in the template above.
  &lt;script type="text/javascript"&gt;
    //&lt;![CDATA[
    if ($('tmEditWysiwyg')) {
      // Manage switch from wiki to wysiwyg, content must be preserved between those editors.
      Event.observe($('tmEditWysiwyg'), "click", function(event) {
        #if($doc.syntax.toIdString() == "xwiki/1.0")
        if (checkAdvancedContent("$services.localization.render('checkadvancedcontent')") == false) {
          Event.stop(event);
          return;
        }
        #end
        document.forms.${formname}.action='$doc.getURL("edit", "editor=wysiwyg&amp;$languageparams")';
        document.forms.${formname}.submit();
        Event.stop(event);
      });

      // Manage switch from wysiwyg to wiki, content must be preserved between those editors.
      Event.observe($('tmEditWiki'), "click", function(event) {
        document.forms.${formname}.action='$doc.getURL("edit", "editor=wiki&amp;$languageparams")';
        document.forms.${formname}.submit();
        Event.stop(event);
      });
    }
    //]]&gt;
  &lt;/script&gt;
  &lt;/div&gt; ## mainEditArea
  &lt;/div&gt; ## alleditcontent
  &lt;/div&gt; ## editcolumn
  &lt;div class="clearfix"&gt;&lt;/div&gt;
  &lt;/div&gt; ## leftsidecolumns
  #template("editpanels.vm")
  &lt;div class="clearfix"&gt;&lt;/div&gt;
  &lt;/div&gt; ## xwikieditorinner
  &lt;/div&gt; ## xwikieditor
  ##
  ## Footer
  ##
  #if($editor == 'wiki' || $editor == 'wysiwyg')
    &lt;/form&gt;
  #end
  #template("footer.vm")
  #template("htmlfooter.vm")
  #end ## $editor != 'inline'
#end
</edit.vm>
    </property>
    <property>
      <editinline.vm>## Insert JS and CSS needed for the fullscreen edit feature
$xwiki.jsfx.use('uicomponents/widgets/fullScreen.js', {'forceSkinAction': true, 'language': ${xcontext.language}})##
$xwiki.ssfx.use('uicomponents/widgets/fullScreen.css', true)##
#set($formname = "inline")
#set($saveaction = "save")
#set($previewenabled = true)
## Determine if editing should be allowed
#set($force = $!request.get("force"))
#set($allowDocEdit = !(($doc.getLocked()==true)&amp;&amp;(!$force)) )
##
&lt;div class="main"&gt;
&lt;div id="mainContentArea"&gt;
## ----------------------------------------------------------------------------
## Start FORM at start of content area IF editing is allowed.
## ----------------------------------------------------------------------------
#if ($allowDocEdit)
 &lt;form id="inline" method="post" action="$doc.getURL("preview")" class="withLock"&gt;
#end
#template("eescTitle.vm")
#template("hierarchy.vm")
&lt;div class="row"&gt;
  &lt;div id="editMeta" class="col-xs-12 col-md-7"&gt;
    #template('editmeta.vm')
    ## ----------------------------------------------------------------------------
    ## Compute title to display and modify rendered content accordingly.
    ## ----------------------------------------------------------------------------
    #set ($renderedContent = $cdoc.getRenderedContent())
    #template("titlevars.vm")
    ## ----------------------------
    ## Display the title
    ## ----------------------------
    &lt;div id="document-title"&gt;&lt;h1&gt;$titleToDisplay&lt;/h1&gt;&lt;/div&gt;
  &lt;/div&gt;
  #if($displayContentMenu)
    &lt;div class="col-xs-12 col-md-5"&gt;
      #template("menus_content.vm")
    &lt;/div&gt;
  #end
&lt;/div&gt;
##
## If the document cannot be edited, display an information and a forcing link:
##
#if (!$allowDocEdit)
  &lt;div&gt;
  $response.setStatus(423)
  #set($newquerystring = "$!{request.getQueryString().replaceAll('&amp;', '&amp;amp;').replaceAll('&amp;amp;amp;', '&amp;amp;')}&amp;amp;force=1")
  #set($forceEditURL = $doc.getURL($xcontext.action, ${newquerystring}))
  #xwikimessageboxstart($services.localization.render('notice') "$services.localization.render('doclockedby') $xwiki.getUserName($doc.getLockingUser())")
    &lt;a href="$forceEditURL"&gt;$services.localization.render('forcelock')&lt;/a&gt;
  #xwikimessageboxend()
  &lt;/div&gt;
#else
##
## Otherwise, can edit - continue the form.
##
&lt;div&gt;
&lt;input type="hidden" name="xcontinue" value="$doc.getURL($doc.getDefaultEditMode(), 'editor=inline')"/&gt;
## CSRF prevention
&lt;input type="hidden" name="form_token" value="$!{services.csrf.getToken()}" /&gt;
## This input is used by the full screen widget: it stores the selector of the maximized element, so that the full screen can be restored when coming back from preview.
&lt;input type="hidden" name="x-maximized" value="$!{escapetool.xml(${request.get('x-maximized')})}" /&gt;
&lt;input type="hidden" name="xredirect" value="$!{escapetool.xml($request.get('xredirect'))}" /&gt;
&lt;input type="hidden" name="xnotification" value="$!{escapetool.xml($request.get('xnotification'))}" /&gt;
&lt;input type="hidden" name="template" value="$!{escapetool.xml($request.template)}" /&gt;
## We need to submit the language of the translated document because the inline edit mode is not limited to editing only
## the objects, which are shared by all translations. We can also edit the content or the title of the document which are
## specific to each translation and so we need to specify which translation is being edited.
&lt;input type="hidden" name="language" value="$!{escapetool.xml($tdoc.realLanguage)}" /&gt;
#if("$!request.parent" != '')
  &lt;input type="hidden" name="parent" value="$escapetool.xml($!request.parent)" /&gt;
#end
#if("$!request.title" != '')
  &lt;input type="hidden" name="title" value="$escapetool.xml($!request.title)" /&gt;
#end
## ----------------------------
## Display the rendered content
## ----------------------------
$renderedContent
#set($editactions = "bottom")
&lt;div class="bottombuttons"&gt;#template("editactions.vm")&lt;/div&gt;
&lt;/div&gt; ## form
&lt;/form&gt;
#template("textarea_wysiwyg.vm")
#end ## can edit
&lt;/div&gt; ## mainContentArea
&lt;/div&gt; ## main
</editinline.vm>
    </property>
    <property>
      <eescHeader.vm>###
### Header for EESC
###
### Provide functional buttons (create, edit, share, delete)
###
#set($isTask = false)
#set($task = $doc.getObject('TaskManager.TaskManagerClass'))
#if($!task)
  #set($isTask = true)
#end
#set($isProject = false)
#set($project = $doc.getObject('ProjectsCode.ProjectsCodeClass'))
#if($!project)
  #set($isProject = true)
#end
#set($hasProject = false)
#set($query = "from doc.object('ProjectsCode.ProjectsCodeClass') as project where doc.fullName not like '%Template'")
#if($services.query.xwql($query).execute().size() &gt; 0)
  #set($hasProject = true)
#end
#########
#includeInContext("EESCCode.GlobalVars")
#########
#set($documentref = $services.model.resolveDocument($doc.fullName))
#set($projectshareref = $services.model.createDocumentReference($services.wiki.currentWikiId, 'EESCCode', 'ProjectShare'))
#set($projectcreateref = $services.model.createDocumentReference($services.wiki.currentWikiId, 'EESCCode', 'ProjectCreate'))
#set($tasktemplateref = $services.model.createDocumentReference($services.wiki.currentWikiId, 'EESCCode', 'TaskManagerTemplate'))
#set($taskname = $services.localization.render('eesc.home.task') + $xwiki.getUserName($context.getUser(),false) + $datetool.get('yyyyMdHms'))
#set($newtaskname = "$xwiki.getUniquePageName('TaskManager',$taskname)")

#set($newtaskref = $services.model.createDocumentReference($services.wiki.currentWikiId, 'TaskManager',$newtaskname))
&lt;style type="text/css"&gt;
.form-inline {
  display: inline-block;
}
.text-right {
  float: right;
}
&lt;/style&gt;
&lt;span class="text-left"&gt;
  &lt;form class="form-inline" method="GET" action="${xwiki.getURL($projectcreateref)}"&gt;
    &lt;input type="hidden" name="step" value="form" /&gt;
    &lt;input type="hidden" name="referer" value="${doc.fullName}" /&gt;
    &lt;input type="submit" class="btn btn-success" value="${services.localization.render('eesc.template.eescheader.create.project')}" /&gt;
  &lt;/form&gt;
  #if($hasProject)
    &lt;form class="form-inline" method="GET" action="${xwiki.getURL($newtaskref,'edit')}"&gt;
      &lt;input type="hidden" name="template" value="${tasktemplateref}" /&gt;
      #if($isProject)
        &lt;input type="hidden" name="TaskManager.TaskManagerClass_0_project" value="${doc}" /&gt;
        &lt;input type="hidden" name="parent" value="${doc}" /&gt;
      #else
        &lt;input type="hidden" name="parent" value="Main.WebHome" /&gt;
      #end
	  #set($showNewTaskBtn = false)
	  #if($isProject)
	    #if($hasEdit)
			#set($showNewTaskBtn = true)
		#end
	  #else
		#set($showNewTaskBtn = true)
	  #end
		#if($showNewTaskBtn &amp;&amp; $hasProjectsEditRights)
			&lt;input type="submit" class="btn btn-success" value="${services.localization.render('eesc.template.eescheader.create.task')}" /&gt;
		#end
	&lt;/form&gt;
  #end
&lt;/span&gt;
&lt;span class="text-right"&gt;
  #if(!$doc.isHidden() &amp;&amp; $hasEdit)
    &lt;form class="form-inline" method="GET" action="${xwiki.getURL($documentref, 'edit', '')}"&gt;
      &lt;input type="submit" class="btn btn-primary" value="${services.localization.render('eesc.template.eescheader.project.edit')}" /&gt; 
    &lt;/form&gt;
    #if($doc.hasAccessLevel("delete"))
      #if($isProject)
      &lt;form class="form-inline" method="GET" action="${xwiki.getURL($projectshareref, 'view', '')}"&gt;
        &lt;input type="hidden" name="step" value="form" /&gt;
        &lt;input type="hidden" name="projectname" value="${doc.name}" /&gt;
        &lt;input type="submit" class="btn btn-primary" value="${services.localization.render('eesc.template.eescheader.project.share')}" /&gt; 
      &lt;/form&gt;
      &lt;form class="form-inline" method="GET" action="${xwiki.getURL($documentref, 'delete', '')}"&gt;
        &lt;input type="submit" class="btn btn-danger" value="${services.localization.render('eesc.template.eescheader.project.delete')}" /&gt; 
      &lt;/form&gt;
    #end
  #end
#end
&lt;/span&gt;
</eescHeader.vm>
    </property>
    <property>
      <eescTitle.vm>###
### Title for EESC
###
&lt;style type="text/css"&gt;
.eesc-service-title {
  color: gray;
}
&lt;/style&gt;
&lt;h1 class="eesc-service-title"&gt;${services.localization.render('eesc.service.name')}&lt;/h1&gt;
#if($doc.parent &amp;&amp; $doc.parent == '')
  &lt;hr /&gt;
#end
</eescTitle.vm>
    </property>
    <property>
      <footer.vm/>
    </property>
    <property>
      <header.vm/>
    </property>
    <property>
      <layoutExtraVars.vm>#* 
 * Voluntary left empty.
 * This template is intended to be used by custom skin that want to override values from layoutvars.vm safely.
 *  
 * Some example of variables that can be overridden here :
 * #set($displayContentMenu = false)
 * #set($displayMainMenu = false)
 * #set($displayDocExtra = false)
 * #set($displayShortcuts = false)
 *#
 
#set($currentUser = $xwiki.user.user.toString())
#set($adminDoc = $xwiki.getDocument('xwiki:XWiki.XWikiAdminGroup'))
#set($adminObj = $adminDoc.getObject('XWiki.XWikiGroups', 'member', $currentUser.replace('xwiki:', '')))

#if(!$adminObj)
  #set($displayContentMenu = false)
  #set($displayMainMenu = false)
  ##set($displayDocExtra = false)
  #set($displayShortcuts = false)
#end

#set($eescForbiddenSpaces = [])
#set($discard = $eescForbiddenSpaces.add('AnnotationCode'))
#set($discard = $eescForbiddenSpaces.add('AppWithinMinutes'))
#set($discard = $eescForbiddenSpaces.add('Collections'))
#set($discard = $eescForbiddenSpaces.add('ColorThemes'))
#set($discard = $eescForbiddenSpaces.add('EESCCode'))
#set($discard = $eescForbiddenSpaces.add('Import'))
#set($discard = $eescForbiddenSpaces.add('Invitation'))
#set($discard = $eescForbiddenSpaces.add('Main'))
#set($discard = $eescForbiddenSpaces.add('Menu'))
#set($discard = $eescForbiddenSpaces.add('Panels'))
#set($discard = $eescForbiddenSpaces.add('Scheduler'))
#set($discard = $eescForbiddenSpaces.add('Stats'))
#set($discard = $eescForbiddenSpaces.add('SyntaxHighlighting'))
#set($discard = $eescForbiddenSpaces.add('Watch'))
#set($discard = $eescForbiddenSpaces.add('WatchAdmin'))
#set($discard = $eescForbiddenSpaces.add('WatchCode'))
#set($discard = $eescForbiddenSpaces.add('WatchSheets'))
#set($discard = $eescForbiddenSpaces.add('WikiManager'))
#set($discard = $eescForbiddenSpaces.add('XApp'))
#set($discard = $eescForbiddenSpaces.add('XAppClasses'))
#set($discard = $eescForbiddenSpaces.add('XAppSheets'))
#set($discard = $eescForbiddenSpaces.add('XAppTemplates'))
#set($discard = $eescForbiddenSpaces.add('XWiki'))
</layoutExtraVars.vm>
    </property>
    <property>
      <logo/>
    </property>
    <property>
      <name>EESC Skin</name>
    </property>
    <property>
      <preview.vm>#template("startpage.vm")
&lt;div class="main layoutsubsection"&gt;
&lt;div id="mainContentArea"&gt;
&lt;div class="topbuttons"&gt;#template("previewactions.vm")&lt;hr /&gt;&lt;/div&gt;
#template("eescTitle.vm")
#template("hierarchy.vm")
#template("contentview.vm")
&lt;div class="bottombuttons"&gt;&lt;hr /&gt;#template("previewactions.vm")&lt;/div&gt;
&lt;/div&gt; ## mainContentArea
&lt;/div&gt; ## main
#template("endpage.vm")
</preview.vm>
    </property>
    <property>
      <style.css/>
    </property>
    <property>
      <uorgsuggest.vm>$response.setContentType("text/xml")
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;results&gt;
#macro (suggestUsersOrGroups)
  #set ($input = "$!request.input.toLowerCase()")
  #if ($input.length() &gt; 0)
    ## Resolve the input as a user/group reference and use only the document name for matching.
    #set ($input = $services.model.resolveDocument($input).name)
  #end
  #if ($request.uorg == 'user')
    #set ($statement = "from doc.object(XWiki.XWikiUsers) as user where lower(doc.name) like :input or concat(concat(lower(user.first_name), ' '), lower(user.last_name)) like :input order by user.first_name, user.last_name")
  #else
    ##set ($statement = 'from doc.object(XWiki.XWikiGroups) as groups where lower(doc.name) like :input and doc.fullName &lt;&gt; ''XWiki.XWikiGroupTemplate'' order by doc.name')
    #set ($statement = 'from doc.object(XWiki.XWikiGroups) as groups where (lower(doc.name) like :input or lower(doc.title) like :input) and doc.fullName &lt;&gt; ''XWiki.XWikiGroupTemplate'' order by doc.name, doc.title')
  #end
  #set ($query = $services.query.xwql($statement).setWiki($wikiReference.name).addFilter('unique'))
  #set ($discard = $query.setOffset(0).setLimit(10).bindValue('input', "%$input%"))
  #foreach ($result in $query.execute())
    #displayResult($result)
  #end
#end

#macro (displayResult $result)
  #if ($request.uorg == 'user')
     #set($projectRightsManager = $xwiki.parseGroovyFromPage("EESCCode.ProjectRightsManagerGroovy"))
     #set($discard = $projectRightsManager.init($xwiki, $context, $services))
     #if($request.project &amp;&amp; "$request.project" != "")
       #set($filterByProject = true)
       #set($projectRights = $projectRightsManager.getProjectRights($request.project))
       #set($projectCreator = $projectRights.get("projectCreator"))
       #set($projectEditGroups = $projectRights.get("editGroups"))
       #set($projectEditUsers = $projectRights.get("editUsers"))
     #end
  #end
  #set ($reference = $services.model.resolveDocument($result, $wikiReference))
  ## Make sure we use relative references as much as possible. See XWIKI-10046.
  #set ($stringReference = $services.model.serialize($reference, 'compactwiki'))
  #getUserAvatarURL($reference $avatarURL 30)
  #if($request.uorg == 'user')
    ## The string returned by XWiki#getUserName() is XML encoded.
    #set ($prettyName = $xwiki.getUserName($stringReference, false))
  #else
    #set ($prettyName = $xwiki.getDocument($reference).plainTitle)
    #if ("$!prettyName" == '')
      #set ($prettyName = $reference.name)
    #end
  #end
  #if($request.uorg == 'user' &amp;&amp; $filterByProject)
   #set($showItem = false)
   #if($projectEditGroups.contains("XWiki.XWikiAllGroup"))
      #set($showItem = true)
   #else
     #if(($projectCreator == $stringReference) || $projectEditUsers.contains($stringReference))
       #set($showItem = true)  
     #end
     ## Check if the result belongs to a group that can edit the project
     #foreach($g in $projectEditGroups)
        #set($usr = $xwiki.getUser($stringReference))
        #if($usr &amp;&amp; $usr.isUserInGroup($g))
           #set($showItem = true)
        #end
     #end
   #end
    #if($showItem)
       &lt;rs id="$escapetool.xml($reference.name)" icon="$escapetool.xml($avatarURL.url)"
       info="$prettyName"&gt;$escapetool.xml($stringReference)&lt;/rs&gt;
       #end
  #else
    &lt;rs id="$escapetool.xml($reference.name)" icon="$escapetool.xml($avatarURL.url)"
    info="$prettyName"&gt;$escapetool.xml($stringReference)&lt;/rs&gt;
  #end
#end

#if ($request.wiki == 'global')
  #set ($wikiReference = $services.model.createWikiReference($xcontext.mainWikiName))
#else
  #set ($wikiReference = $doc.documentReference.wikiReference)
#end
#if ($request.exactMatch == 'true')
  ## This is normally used for loading the initial selection.
  #displayResult("$!request.input")
#else
  #suggestUsersOrGroups()
#end
&lt;/results&gt;
</uorgsuggest.vm>
    </property>
    <property>
      <view.vm>###
### Main "view" template
###
### General wrapper for view actions
###
#if ($services.distribution.jobStatus &amp;&amp; $services.distribution.jobStatus.state.name() != 'FINISHED' &amp;&amp; $services.distribution.canDisplayDistributionWizard())
  $response.sendRedirect($xwiki.getURL('XWiki.Distribution', 'distribution', "xredirect=$escapetool.url($xwiki.relativeRequestURL)"))
#elseif ($request.getParameter("raw").equals("1"))
  #template("code.vm")
#else
  #template("startpage.vm")
  
  #if("$!viewer" == '')
    #set($viewer = $request.getParameter('viewer'))
  #end
  #if("$!viewer" == '')
    #set($viewer = 'content')
  #end
  
  &lt;div class="main"&gt;
  &lt;div id="mainContentArea"&gt;
  #template("eescTitle.vm")
  #template("hierarchy.vm")
  #template("eescHeader.vm")
  #if($viewer == 'content')
    #template("contentview.vm")
  #else
    #template("${viewer}.vm")
  #end
  &lt;div class="clearfloats"&gt;&lt;/div&gt;
  &lt;/div&gt;## mainContentArea
  #if($viewer == 'content' &amp;&amp; $displayDocExtra)
    #template("docextra.vm")
  #end
  &lt;/div&gt;## main
  #template("endpage.vm")
#end
</view.vm>
    </property>
    <property>
      <viewheader.vm/>
    </property>
  </object>
</xwikidoc>
